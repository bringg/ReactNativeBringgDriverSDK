{"version":3,"sources":["android.tsx"],"names":["NativeModules","NativeEventEmitter","taskFromJSONString","getAndroidNativeModule","BringgDriverSdk","bringgDriverSDKEventEmitter","bringgDriverSDK","addListenerToActiveTask","listener","observeActiveTask","addListener","taskString","addListenerToIsLoggedIn","observeLoginState"],"mappings":"AAAA,SACEA,aADF,EAGEC,kBAHF,QAIO,cAJP;AAMA,SAAeC,kBAAf,QAAyC,eAAzC;AAsCA,OAAO,SAASC,sBAAT,GAA8D;AACnE,QAAM;AAAEC,IAAAA;AAAF,MAAsBJ,aAA5B;AACA,QAAMK,2BAA2B,GAAG,IAAIJ,kBAAJ,CAAuBG,eAAvB,CAApC;AAEA,QAAME,eAA2C,GAAG,EAClD,GAAGF,eAD+C;AAElDG,IAAAA,uBAAuB,EAAE,MAAOC,QAAP,IAAkD;AACzE,YAAMJ,eAAe,CAACK,iBAAhB,EAAN;AACA,aAAOJ,2BAA2B,CAACK,WAA5B,CACL,YADK,EAEJC,UAAD,IAAwB;AACtBH,QAAAA,QAAQ,CAACN,kBAAkB,CAACS,UAAD,CAAnB,CAAR;AACD,OAJI,CAAP;AAMD,KAViD;AAWlDC,IAAAA,uBAAuB,EAAE,MAAOJ,QAAP,IAAkD;AACzE,YAAMJ,eAAe,CAACS,iBAAhB,EAAN;AACA,aAAOR,2BAA2B,CAACK,WAA5B,CAAwC,YAAxC,EAAsDF,QAAtD,CAAP;AACD;AAdiD,GAApD;AAiBA,SAAOF,eAAP;AACD","sourcesContent":["import {\n  NativeModules,\n  EmitterSubscription,\n  NativeEventEmitter,\n} from 'react-native';\nimport { SDKInitializeFlag } from './consts/SDKInitializeFlag';\nimport { Task, taskFromJSONString } from './models/task';\n\nexport type BringgDriverSdkAndroidType = {\n  init(flags: SDKInitializeFlag[] | null): Promise<void>;\n  loginWithToken(token: String, secret: String, region: String): Promise<void>;\n  logout(): Promise<void>;\n\n  startTask(id: number): Promise<void>;\n  arriveAtWaypoint(): Promise<void>;\n  arriveAtWaypointWithCustomerVehicle(\n    saveVehicle: boolean,\n    licensePlate: String | null,\n    color: String | null,\n    model: String | null,\n    parkingSpot: String | null\n  ): Promise<void>;\n  arriveAtWaypointWithCustomerVehicleAndVehicleId(\n    vehicleId: number,\n    saveVehicle: boolean,\n    licensePlate: String | null,\n    color: String | null,\n    model: String | null,\n    parkingSpot: String | null\n  ): Promise<void>;\n  leaveWaypoint(): Promise<void>;\n  updateWaypointEta(eta: string): Promise<void>;\n\n  setUserTransportType(transportType: number): Promise<void>;\n\n  addListenerToActiveTask(\n    listener: (task: Task | null) => void\n  ): Promise<EmitterSubscription>;\n\n  addListenerToIsLoggedIn(\n    listener: (isLoggedIn: boolean) => void\n  ): Promise<EmitterSubscription>;\n};\n\nexport function getAndroidNativeModule(): BringgDriverSdkAndroidType {\n  const { BringgDriverSdk } = NativeModules;\n  const bringgDriverSDKEventEmitter = new NativeEventEmitter(BringgDriverSdk);\n\n  const bringgDriverSDK: BringgDriverSdkAndroidType = {\n    ...BringgDriverSdk,\n    addListenerToActiveTask: async (listener): Promise<EmitterSubscription> => {\n      await BringgDriverSdk.observeActiveTask();\n      return bringgDriverSDKEventEmitter.addListener(\n        'activeTask',\n        (taskString: string) => {\n          listener(taskFromJSONString(taskString));\n        }\n      );\n    },\n    addListenerToIsLoggedIn: async (listener): Promise<EmitterSubscription> => {\n      await BringgDriverSdk.observeLoginState();\n      return bringgDriverSDKEventEmitter.addListener('isLoggedIn', listener);\n    },\n  };\n\n  return bringgDriverSDK;\n}\n"]}